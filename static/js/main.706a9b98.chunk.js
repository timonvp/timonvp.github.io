(this["webpackJsonprecipe-app"]=this["webpackJsonprecipe-app"]||[]).push([[0],{11:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return u}));var a=r(32),n=r.n(a),c=r(19),s=JSON.parse('"https://recepten-app.herokuapp.com"');console.log(s);var i=n.a.create({baseURL:s+"/",headers:{Authorization:"Bearer ".concat(localStorage.getItem(c.token_key))}}),u=function(e){e?i.defaults.headers.Authorization="Bearer ".concat(e):delete i.defaults.headers.Authorization}},12:function(e,t,r){"use strict";(function(e){r.d(t,"e",(function(){return O})),r.d(t,"b",(function(){return f})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return g})),r.d(t,"a",(function(){return v}));var a=r(2),n=r.n(a),c=r(4),s=r(6),i=r(1),u=r(22),l=r(19),o=r(11),d=r(0),j=l.token_key,b=Object(i.createContext)();function p(t){if(!t)return{};var r=t.split(".")[1],a=e.from(r,"base64").toString("ascii");return JSON.parse(a)}function m(e){return e?("number"!==typeof e&&(e=Number(e)),isNaN(e)?null:new Date(1e3*e)):null}var x=function(){return Object(i.useContext)(b)},O=function(){var e=x(),t=e.token,r=e.user,a=e.ready,n=e.loading,c=e.error,s=e.hasRole;return{token:t,user:r,ready:a,error:c,loading:n,isAuthed:Boolean(t),hasRole:s}},f=function(){return x().login},h=function(){return x().logout},g=function(){return x().register},v=function(e){var t=e.children,r=Object(i.useState)(!1),a=Object(s.a)(r,2),l=a[0],x=a[1],O=Object(i.useState)(!1),f=Object(s.a)(O,2),h=f[0],g=f[1],v=Object(i.useState)(""),y=Object(s.a)(v,2),w=y[0],N=y[1],k=Object(i.useState)(localStorage.getItem(j)),S=Object(s.a)(k,2),C=S[0],V=S[1],_=Object(i.useState)(null),F=Object(s.a)(_,2),R=F[0],A=F[1],E=Object(i.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a,c,s,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=p(t),c=a.exp,s=m(c),(i=s>=new Date)?localStorage.setItem(j,t):(localStorage.removeItem(j),t=null),o.c(t),V(t),x(t&&i),A(r);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[]);Object(i.useEffect)((function(){E(C)}),[C,E]);var T=Object(i.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a,c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),N(null),e.next=5,u.a(t,r);case 5:return a=e.sent,c=a.token,s=a.user,e.next=10,E(c,s);case 10:return e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),console.error(e.t0),N("Gebruikersnaam en wachtwoord komen niet overeen."),e.abrupt("return",!1);case 18:return e.prev=18,g(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,13,18,21]])})));return function(t,r){return e.apply(this,arguments)}}(),[E]),B=Object(i.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(t){var r,a,c,s,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,a=t.password,e.prev=1,g(!0),N(null),e.next=6,u.b(r,a);case 6:return c=e.sent,s=c.token,i=c.user,console.warn(s,i),e.next=12,E(s,i);case 12:return e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(1),N(e.t0.message),e.abrupt("return",!1);case 19:return e.prev=19,g(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(t){return e.apply(this,arguments)}}(),[E]),q=Object(i.useCallback)((function(){E(null,null)}),[E]),I=Object(i.useCallback)((function(e){return!!R&&R.roles.includes(e)}),[R]),P=Object(i.useMemo)((function(){return{token:C,user:R,ready:l,loading:h,error:w,login:T,logout:q,register:B,hasRole:I}}),[C,R,l,h,w,T,q,B,I]);return Object(d.jsx)(b.Provider,{value:P,children:t})}}).call(this,r(38).Buffer)},19:function(e){e.exports=JSON.parse('{"token_key":"auth_token"}')},22:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return u}));var a=r(2),n=r.n(a),c=r(4),s=r(11),i=function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.post("".concat(s.a,"/login"),{username:t,password:r});case 2:return a=e.sent,c=a.data.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(n.a.mark((function e(t,r){var a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.post("".concat(s.a,"/users"),{username:t,password:r});case 2:return a=e.sent,c=a.data.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},37:function(e,t,r){},63:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),c=r(31),s=r.n(c),i=(r(37),r(12)),u=r(7),l=r(3),o=r(5),d=r(0);function j(e){var t=e.id,r=e.name,a=e.people,n=e.duration;return Object(d.jsx)(u.b,{className:"bg-gray-800 m-5 px-6 py-3 text-gray-200 cursor-pointer",to:"/recipe/".concat(t),children:Object(d.jsxs)("div",{className:"flex pb-3 items-center",children:[Object(d.jsx)("h1",{className:"text-center flex-grow text-lg",children:r}),Object(d.jsxs)("div",{className:"flex-none",children:[Object(d.jsxs)("p",{children:["Tijdsduur: ",n,"min"]}),Object(d.jsxs)("p",{children:["Personen: ",a]})]})]})})}var b=r(2),p=r.n(b),m=r(4),x=r(6),O=r(11);function f(e){var t=Object(a.useState)([]),r=Object(x.a)(t,2),n=r[0],c=r[1],s=Object(a.useState)(!0),i=Object(x.a)(s,2),u=i[0],l=i[1],o=Object(a.useState)(),d=Object(x.a)(o,2),j=d[0],b=d[1],f=Object(a.useCallback)(function(){var e=Object(m.a)(p.a.mark((function e(t){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(),l(!0),e.next=5,O.b.get(O.a+t);case 5:r=e.sent,a=r.data,c(a.data),l(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),l(!1),b(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(a.useEffect)((function(){f(e)}),[e,f]),{loading:u,data:n,error:j}}function h(){var e=Object(i.c)();return Object(d.jsxs)("div",{className:"bg-gray-800 p-4 fixed w-full flex items-center text-white",children:[Object(d.jsxs)(u.b,{className:"flex items-center",to:"/",children:[Object(d.jsx)("img",{src:"/recipe.png",alt:"",className:"w-12 mx-4"}),"Recepten App"]}),Object(d.jsxs)("div",{className:"flex ml-auto",children:[Object(d.jsx)(u.b,{className:"ml-auto mr-6 cursor-pointer",to:"/",children:"Eigen Recepten"}),Object(d.jsx)(u.b,{className:"ml-auto mr-6 cursor-pointer",to:"/other",children:"Andere Recepten"}),Object(d.jsx)(u.b,{className:"ml-auto mr-6 cursor-pointer",to:"/add",children:"Recept Toevoegen"})]}),Object(d.jsx)("div",{className:"ml-auto mr-4 cursor-pointer",onClick:e,children:"Uitloggen"})]})}function g(){var e=f("/api/recipes/own").data;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(h,{}),Object(d.jsx)("div",{className:"App grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 pt-28",children:e.map((function(e){return Object(a.createElement)(j,Object(o.a)(Object(o.a)({},e),{},{key:e.id}))}))})]})}var v=r(10),y=r(20),w=function(e){var t=e.label,r=e.type,a=e.defaultValue,n=e.validation,c=Object(y.a)(e,["label","type","defaultValue","validation"]),s=Object(v.c)(),i=s.register,u=s.formState.errors;return Object(d.jsxs)("div",{className:"col-span-6 sm:col-span-3 p-2",children:[Object(d.jsx)("input",Object(o.a)(Object(o.a)({},i(t,n)),{},{className:"p-2 w-72",defaultValue:a,placeholder:t,type:r,id:t,name:t},c)),u[t]&&Object(d.jsx)("p",{"data-cy":"labelinput-error",className:"text-red-500",children:u[t].message})]})},N={username:{required:!0},password:{required:!0}};function k(){var e=Object(l.g)(),t=Object(i.e)(),r=t.loading,n=t.error,c=Object(i.b)(),s=Object(v.b)(),j=s.handleSubmit,b=Object(a.useCallback)(function(){var t=Object(m.a)(p.a.mark((function t(r){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.username,n=r.password,t.next=3,c(a,n);case 3:t.sent&&e("/",{replace:!0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,c]);return Object(d.jsx)(v.a,Object(o.a)(Object(o.a)({},s),{},{children:Object(d.jsx)("div",{className:"mx-auto w-1/4 h-screen flex items-center",children:Object(d.jsxs)("form",{className:"grid grid-cols-1 gap-y-4",onSubmit:j(b),children:[n?Object(d.jsx)("p",{className:"text-red-500",children:n}):null,Object(d.jsx)(w,{label:"username",type:"text",defaultValue:"","data-cy":"username_input",placeholder:"Gebruikersnaam",autoComplete:"off",validation:N.username}),Object(d.jsx)(w,{label:"password",type:"password",defaultValue:"","data-cy":"password_input",placeholder:"Wachtwoord",autoComplete:"off",validation:N.password}),Object(d.jsxs)("div",{className:"flex flex-row justify-end",children:[Object(d.jsx)(u.b,{to:"/register",className:"px-4 py-2 text-gray-400",children:"Registreer"}),Object(d.jsx)("button",{"data-cy":"submit_btn",type:"submit",disabled:r,className:"disabled:opacity-50 text-white bg-gray-800 px-4 py-2 rounded-sm",children:"Login"})]})]})})}))}var S={username:{required:!0},password:{required:!0}};function C(){var e=Object(l.g)(),t=Object(i.e)(),r=t.loading,n=t.error,c=Object(i.d)(),s=Object(v.b)(),j=s.handleSubmit,b=Object(a.useCallback)(function(){var t=Object(m.a)(p.a.mark((function t(r){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.username,n=r.password,t.next=3,c({username:a,password:n});case 3:t.sent&&e("/",{replace:!0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,c]);return Object(d.jsx)(v.a,Object(o.a)(Object(o.a)({},s),{},{children:Object(d.jsx)("div",{className:"mx-auto w-1/4 h-screen flex items-center",children:Object(d.jsxs)("form",{className:"grid grid-cols-1 gap-y-4",onSubmit:j(b),children:[n?Object(d.jsx)("p",{className:"text-red-500",children:n}):null,Object(d.jsx)(w,{label:"username",type:"text",defaultValue:"","data-cy":"username_input",placeholder:"Gebruikersnaam",autoComplete:"off",validation:S.username}),Object(d.jsx)(w,{label:"password",type:"password",defaultValue:"","data-cy":"password_input",placeholder:"Wachtwoord",autoComplete:"off",validation:S.password}),Object(d.jsxs)("div",{className:"flex flex-row justify-end",children:[Object(d.jsx)(u.b,{to:"/login",className:"px-4 py-2 text-gray-400 text-sm",children:"Terug naar inloggen"}),Object(d.jsx)("button",{"data-cy":"submit_btn",type:"submit",disabled:r,className:"disabled:opacity-50 text-white bg-gray-800 px-4 py-2 rounded-sm",children:"Registreer"})]})]})})}))}function V(){var e=f("/api/recipes/other").data;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(h,{}),Object(d.jsx)("div",{className:"App grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 pt-28",children:e.map((function(e){return Object(a.createElement)(j,Object(o.a)(Object(o.a)({},e),{},{key:e.id}))}))})]})}var _=function(e){var t=e.name,r=e.unit,a=e.amount;return Object(d.jsxs)("p",{children:[a," ",r," ",t]})};function F(){var e=Object(l.h)(),t=f("/api/recipes/".concat(e.id)).data;if(!t||0===t.length)return Object(d.jsx)(h,{});console.log(t);var r=t.name,n=t.ingredients,c=t.preparation,s=t.people,i=t.duration,u=t.username;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(h,{}),Object(d.jsx)("div",{className:"pt-24",children:Object(d.jsxs)("div",{className:"bg-gray-800 m-5 px-6 py-3 text-gray-200",children:[Object(d.jsxs)("div",{className:"flex pb-3 items-center",children:[Object(d.jsx)("h1",{className:"text-center flex-grow text-lg",children:r}),Object(d.jsxs)("p",{className:"mr-10 text-sm text-gray-400",children:["door ",u]}),Object(d.jsxs)("div",{className:"flex-none",children:[Object(d.jsxs)("p",{children:["Tijdsduur: ",i,"min"]}),Object(d.jsxs)("p",{children:["Personen: ",s]})]})]}),Object(d.jsxs)("div",{className:"flex",children:[Object(d.jsx)("div",{className:"pr-8 text-sm min-w-max",children:n.map((function(e,t){return Object(a.createElement)(_,Object(o.a)(Object(o.a)({},e),{},{key:t}))}))}),Object(d.jsx)("p",{className:"text-justify text-xs overflow-hidden",children:c})]})]})})]})}var R=function(e){var t=e.label,r=e.type,a=e.defaultValue,n=e.validation,c=Object(y.a)(e,["label","type","defaultValue","validation"]),s=Object(v.c)(),i=s.register,u=s.formState.errors;return Object(d.jsxs)("div",{className:"col-span-6 sm:col-span-3 p-2",children:[Object(d.jsx)("textarea",Object(o.a)(Object(o.a)({},i(t,n)),{},{className:"p-2 w-72",defaultValue:a,placeholder:t,type:r,id:t,name:t},c)),u[t]&&Object(d.jsx)("p",{"data-cy":"labelinput-error",className:"text-red-500",children:u[t].message})]})},A={username:{required:!0},password:{required:!0}};function E(){var e=Object(l.g)(),t=Object(v.b)(),r=t.handleSubmit,n=Object(a.useCallback)(function(){var t=Object(m.a)(p.a.mark((function t(r){var a,n,c,s,i,u,l,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.name,n=r.people,c=r.duration,s=r.preparation,i=r.ingredients,u=void 0===i?"[]":i,t.next=3,O.b.post("".concat(O.a,"/recipes"),{name:a,people:n,duration:c,preparation:s,ingredients:u});case 3:l=t.sent,(o=l.data.data)&&(console.log(o),e("/recipe/".concat(o.id),{replace:!0}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(h,{}),Object(d.jsx)(v.a,Object(o.a)(Object(o.a)({},t),{},{children:Object(d.jsx)("div",{className:"mx-auto w-1/4 h-screen flex items-center",children:Object(d.jsxs)("form",{className:"grid grid-cols-1 gap-y-4",onSubmit:r(n),children:[Object(d.jsx)(w,{className:"w-96 p-2",label:"name",type:"text",defaultValue:"","data-cy":"username_input",placeholder:"Titel",autoComplete:"off",validation:A.username}),Object(d.jsx)(w,{className:"w-96 p-2",label:"people",type:"number",defaultValue:"","data-cy":"username_input",placeholder:"Personen",autoComplete:"off",min:"1",max:"99"}),Object(d.jsx)(w,{className:"w-96 p-2",label:"duration",type:"number",defaultValue:"","data-cy":"username_input",placeholder:"Tijdsduur",autoComplete:"off",min:"1",max:"999"}),Object(d.jsx)(R,{className:"p-2 w-96 h-32 resize-none",placeholder:"Bereidingswijze",label:"preparation"}),Object(d.jsx)("div",{className:"flex flex-row justify-end",children:Object(d.jsx)("button",{"data-cy":"submit_btn",type:"submit",className:"disabled:opacity-50 text-white bg-gray-800 px-4 py-2 rounded-sm",children:"Voeg toe"})})]})})}))]})}function T(){return Object(d.jsx)(u.a,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(B,{})})})}function B(){var e=Object(i.e)().isAuthed;return Object(d.jsx)(l.d,{children:e?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.b,{path:"/",exact:!0,element:Object(d.jsx)(g,{})}),Object(d.jsx)(l.b,{path:"/other",exact:!0,element:Object(d.jsx)(V,{})}),Object(d.jsx)(l.b,{path:"/add",exact:!0,element:Object(d.jsx)(E,{})}),Object(d.jsx)(l.b,{path:"/recipe/:id",exact:!0,element:Object(d.jsx)(F,{})})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.b,{path:"/login",exact:!0,element:Object(d.jsx)(k,{})}),Object(d.jsx)(l.b,{path:"/register",exact:!0,element:Object(d.jsx)(C,{})}),Object(d.jsx)(l.b,{path:"*",element:Object(d.jsx)(l.a,{to:"/login"})})]})})}var q=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,64)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))};s.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(T,{})}),document.getElementById("root")),window.addEventListener("load",(function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("serviceWorker.js")})),q()}},[[63,1,2]]]);
//# sourceMappingURL=main.706a9b98.chunk.js.map