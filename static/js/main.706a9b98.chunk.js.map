{"version":3,"sources":["api/index.js","contexts/AuthProvider.js","api/user.js","components/Summary.js","hooks/useFetch.js","components/Navbar.js","pages/Home.js","components/LabelInput.js","pages/Login.js","pages/Register.js","pages/OtherRecipes.js","pages/Recipe.js","components/TextArea.js","pages/AddRecipe.js","App.js","reportWebVitals.js","index.js"],"names":["apiPrefix","JSON","parse","process","console","log","axios","axiosRoot","create","baseURL","headers","Authorization","localStorage","getItem","config","token_key","setAuthToken","token","defaults","JWT_TOKEN_KEY","AuthContext","createContext","parseJwt","base64Url","split","jsonPayload","Buffer","from","toString","parseExp","exp","Number","isNaN","Date","useAuth","useContext","useSession","user","ready","loading","error","hasRole","isAuthed","Boolean","useLogin","login","useLogout","logout","useRegister","register","AuthProvider","children","useState","setReady","setLoading","setError","setToken","setUser","setSession","useCallback","a","expiry","stillValid","setItem","removeItem","api","useEffect","username","password","userApi","warn","message","role","roles","includes","value","useMemo","Provider","post","data","Summary","props","id","name","people","duration","className","to","useFetch","uri","setData","fetchData","get","Navbar","src","alt","onClick","Home","map","v","key","LabelInput","label","type","defaultValue","validation","rest","useFormContext","errors","formState","placeholder","data-cy","validationRules","required","Login","navigate","useNavigate","methods","useForm","handleSubmit","handleLogin","replace","onSubmit","autoComplete","disabled","Register","handleRegister","OtherRecipes","Ingredient","unit","amount","Recipe","params","useParams","length","ingredients","preparation","i","Textarea","AddRecipe","handleAddRecipe","newRecipe","min","max","App","Router","path","exact","element","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","window","addEventListener","navigator","serviceWorker"],"mappings":"+GAAA,mIAGaA,EAAYC,KAAKC,MAAMC,wCACpCC,QAAQC,IAAIL,GAEL,IAAMM,EAAQC,IAAUC,OAAO,CACrCC,QAAST,EAAU,IAChBU,QAAS,CACLC,cAAc,UAAD,OAAYC,aAAaC,QAAQC,EAAOC,eAIhDC,EAAe,SAACC,GACxBA,EACHX,EAAMY,SAASR,QAAf,+BAAoDO,UAE9CX,EAAMY,SAASR,QAAf,gB,+RCZFS,EAAgBL,EAAOC,UACvBK,EAAcC,0BAEpB,SAASC,EAASL,GAChB,IAAKA,EAAO,MAAO,GACnB,IAAMM,EAAYN,EAAMO,MAAM,KAAK,GAE7BC,EADUC,EAAOC,KAAKJ,EAAW,UACXK,SAAS,SACrC,OAAO3B,KAAKC,MAAMuB,GAGpB,SAASI,EAASC,GAChB,OAAKA,GACc,kBAARA,IAAkBA,EAAMC,OAAOD,IACtCE,MAAMF,GAAa,KAChB,IAAIG,KAAW,IAANH,IAHC,KAMnB,IAAMI,EAAU,kBAAMC,qBAAWf,IAEpBgB,EAAa,WAAO,IAAD,EAC0BF,IAAhDjB,EADsB,EACtBA,MAAOoB,EADe,EACfA,KAAMC,EADS,EACTA,MAAOC,EADE,EACFA,QAASC,EADP,EACOA,MAAOC,EADd,EACcA,QAC5C,MAAO,CACLxB,QACAoB,OACAC,QACAE,QACAD,UACAG,SAAUC,QAAQ1B,GAClBwB,YAISG,EAAW,WAEtB,OADkBV,IAAVW,OAIGC,EAAY,WAEvB,OADmBZ,IAAXa,QAIGC,EAAc,WAEzB,OADqBd,IAAbe,UAIGC,EAAe,SAAC,GAEtB,IADLC,EACI,EADJA,SACI,EAEsBC,oBAAS,GAF/B,mBAEGd,EAFH,KAEUe,EAFV,OAG0BD,oBAAS,GAHnC,mBAGGb,EAHH,KAGYe,EAHZ,OAIsBF,mBAAS,IAJ/B,mBAIGZ,EAJH,KAIUe,EAJV,OAKsBH,mBAASxC,aAAaC,QAAQM,IALpD,mBAKGF,EALH,KAKUuC,EALV,OAMoBJ,mBAAS,MAN7B,mBAMGf,EANH,KAMSoB,EANT,KAQEC,EAAaC,sBAAW,uCAAC,WAAO1C,EAAOoB,GAAd,qBAAAuB,EAAA,wDACbtC,EAASL,GAAjBa,EADqB,EACrBA,IACF+B,EAAShC,EAASC,IAClBgC,EAAaD,GAAU,IAAI5B,MAG/BrB,aAAamD,QAAQ5C,EAAeF,IAEpCL,aAAaoD,WAAW7C,GACxBF,EAAQ,MAGVgD,IAAiBhD,GACjBuC,EAASvC,GACToC,EAASpC,GAAS6C,GAKlBL,EAAQpB,GAnBqB,2CAAD,wDAoB3B,IAEH6B,qBAAU,WACRR,EAAWzC,KACV,CAACA,EAAOyC,IAEX,IAAMb,EAAQc,sBAAW,uCAAC,WAAOQ,EAAUC,GAAjB,mBAAAR,EAAA,sEAEtBN,GAAW,GACXC,EAAS,MAHa,SAIQc,IAAcF,EAAUC,GAJhC,uBAIdnD,EAJc,EAIdA,MAAOoB,EAJO,EAIPA,KAJO,UAKhBqB,EAAWzC,EAAOoB,GALF,kCAMf,GANe,yCAQtBjC,QAAQoC,MAAR,MACAe,EAAS,oDATa,mBAUf,GAVe,yBAYtBD,GAAW,GAZW,6EAAD,wDActB,CAACI,IAEET,EAAWU,sBAAW,uCAAC,qCAAAC,EAAA,6DAAQO,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,SAAlB,SAEzBd,GAAW,GACXC,EAAS,MAHgB,SAIKc,IAAiBF,EAAUC,GAJhC,uBAIjBnD,EAJiB,EAIjBA,MAAOoB,EAJU,EAIVA,KACfjC,QAAQkE,KAAKrD,EAAOoB,GALK,UAMnBqB,EAAWzC,EAAOoB,GANC,kCAOlB,GAPkB,yCASzBkB,EAAS,KAAMgB,SATU,mBAUlB,GAVkB,yBAYzBjB,GAAW,GAZc,6EAAD,sDAczB,CAACI,IAEEX,EAASY,uBAAY,WACzBD,EAAW,KAAM,QAChB,CAACA,IAEEjB,EAAUkB,uBAAY,SAACa,GAC3B,QAAKnC,GACEA,EAAKoC,MAAMC,SAASF,KAC1B,CAACnC,IAEEsC,EAAQC,mBAAQ,iBAAO,CAC3B3D,QACAoB,OACAC,QACAC,UACAC,QACAK,QACAE,SACAE,WACAR,aACE,CAACxB,EAAOoB,EAAMC,EAAOC,EAASC,EAAOK,EAAOE,EAAQE,EAAUR,IAElE,OACE,cAACrB,EAAYyD,SAAb,CAAsBF,MAAOA,EAA7B,SACGxB,O,mOC9IMN,EAAK,uCAAG,WAAOsB,EAAUC,GAAjB,iBAAAR,EAAA,sEAGVtD,IAAMwE,KAAN,UAAc9E,IAAd,UAAiC,CAC1CmE,WACAC,aALmB,uBAEZW,EAFY,EAEnBA,KAAOA,KAFY,kBAObA,GAPa,2CAAH,wDAUL9B,EAAQ,uCAAG,WAAOkB,EAAUC,GAAjB,iBAAAR,EAAA,sEAGbtD,IAAMwE,KAAN,UAAc9E,IAAd,UAAiC,CAC1CmE,WACAC,aALsB,uBAEfW,EAFe,EAEtBA,KAAOA,KAFe,kBAOhBA,GAPgB,2CAAH,yD,6ICTN,SAASC,EAAQC,GAAQ,IAC7BC,EAA8BD,EAA9BC,GAAIC,EAA0BF,EAA1BE,KAAMC,EAAoBH,EAApBG,OAAQC,EAAYJ,EAAZI,SACzB,OAAO,cAAC,IAAD,CAAMC,UAAU,yDAAyDC,GAAE,kBAAaL,GAAxF,SACH,sBAAKI,UAAU,yBAAf,UACI,oBAAIA,UAAU,gCAAd,SAA+CH,IAC/C,sBAAKG,UAAU,YAAf,UACI,4CAAeD,EAAf,SACA,2CAAcD,a,0CCPvB,SAASI,EAASC,GAAM,IAAD,EACJrC,mBAAS,IADL,mBACrB2B,EADqB,KACfW,EADe,OAEEtC,oBAAS,GAFX,mBAErBb,EAFqB,KAEZe,EAFY,OAGFF,qBAHE,mBAGrBZ,EAHqB,KAGde,EAHc,KAKtBoC,EAAYhC,sBAAW,uCAAC,WAAO8B,GAAP,iBAAA7B,EAAA,sEAE1BL,IACAD,GAAW,GAHe,SAILhD,IAAMsF,IAAI5F,IAAUyF,GAJf,gBAInBV,EAJmB,EAInBA,KACPW,EAAQX,EAAKA,MACbzB,GAAW,GANe,kDAQ1BA,GAAW,GACXC,EAAS,EAAD,IATkB,0DAAD,sDAW1B,IAMH,OAJAW,qBAAU,WACRyB,EAAUF,KACT,CAACA,EAAKE,IAEF,CAACpD,UAASwC,OAAMvC,SCrBV,SAASqD,IACpB,IAAM9C,EAASD,cAEf,OAAQ,sBAAKwC,UAAU,4DAAf,UACJ,eAAC,IAAD,CAAMA,UAAU,oBAAoBC,GAAG,IAAvC,UAA4C,qBAAKO,IAAI,cAAcC,IAAI,GAAGT,UAAU,cAApF,kBACA,sBAAKA,UAAU,eAAf,UACI,cAAC,IAAD,CAAMA,UAAU,8BAA8BC,GAAG,IAAjD,4BACA,cAAC,IAAD,CAAMD,UAAU,8BAA8BC,GAAG,SAAjD,6BACA,cAAC,IAAD,CAAMD,UAAU,8BAA8BC,GAAG,OAAjD,iCAEJ,qBAAKD,UAAU,8BAA8BU,QAASjD,EAAtD,0BCVO,SAASkD,IAAQ,IACpBlB,EAASS,EAAS,oBAAlBT,KACR,OAAQ,qCACJ,cAACc,EAAD,IACA,qBAAKP,UAAU,2DAAf,SACKP,EAAKmB,KAAI,SAAAC,GAAC,OAAI,wBAACnB,EAAD,2BAAamB,GAAb,IAAgBC,IAAKD,EAAEjB,c,oBCgBnCmB,EAvBI,SAAC,GAAwD,IAAtDC,EAAqD,EAArDA,MAAOC,EAA8C,EAA9CA,KAAMC,EAAwC,EAAxCA,aAAcC,EAA0B,EAA1BA,WAAeC,EAAW,8DAC7BC,cAApC1D,EADiE,EACjEA,SAAuB2D,EAD0C,EACvDC,UAAaD,OAC/B,OACE,sBAAKtB,UAAU,+BAAf,UACE,iDACMrC,EAASqD,EAAOG,IADtB,IAEEnB,UAAU,WACVkB,aAAcA,EACdM,YAAaR,EACbC,KAAMA,EACNrB,GAAIoB,EACJnB,KAAMmB,GACFI,IAELE,EAAON,IACN,mBAAGS,UAAQ,mBAAmBzB,UAAU,eAAxC,SACGsB,EAAON,GAAO/B,cCZnByC,EAAkB,CACtB7C,SAAU,CACR8C,UAAU,GAEZ7C,SAAU,CACR6C,UAAU,IAIC,SAASC,IACtB,IAAMC,EAAWC,cADa,EAEHhF,cAAnBG,EAFsB,EAEtBA,QAASC,EAFa,EAEbA,MACXK,EAAQD,cACRyE,EAAUC,cAEdC,EACEF,EADFE,aAGIC,EAAc7D,sBAAW,uCAAC,+BAAAC,EAAA,6DAASO,EAAT,EAASA,SAAUC,EAAnB,EAAmBA,SAAnB,SACRvB,EAAMsB,EAAUC,GADR,eAK5B+C,EAAS,IAAK,CAACM,SAAS,IALI,2CAAD,sDAO5B,CAACN,EAAUtE,IAEd,OACE,cAAC,IAAD,2BAAkBwE,GAAlB,aACE,qBAAK/B,UAAU,2CAAf,SACE,uBAAMA,UAAU,2BAA2BoC,SAAUH,EAAaC,GAAlE,UAEIhF,EACE,mBAAG8C,UAAU,eAAb,SACG9C,IAED,KAEN,cAAC,EAAD,CACE8D,MAAM,WACNC,KAAK,OACLC,aAAa,GACbO,UAAQ,iBACRD,YAAY,iBACZa,aAAa,MACblB,WAAYO,EAAgB7C,WAE9B,cAAC,EAAD,CACEmC,MAAM,WACNC,KAAK,WACLC,aAAa,GACbO,UAAQ,iBACRD,YAAY,aACZa,aAAa,MACblB,WAAYO,EAAgB5C,WAE9B,sBAAKkB,UAAU,4BAAf,UACA,cAAC,IAAD,CAAMC,GAAG,YAAYD,UAAU,0BAA/B,wBACE,wBACEyB,UAAQ,aACRR,KAAK,SACLqB,SAAUrF,EACV+C,UAAU,kEAJZ,8BC1DZ,IAAM0B,EAAkB,CACtB7C,SAAU,CACR8C,UAAU,GAEZ7C,SAAU,CACR6C,UAAU,IAIC,SAASY,IACtB,IAAMV,EAAWC,cADgB,EAENhF,cAAnBG,EAFyB,EAEzBA,QAASC,EAFgB,EAEhBA,MACXS,EAAWD,cACXqE,EAAUC,cAEdC,EACEF,EADFE,aAGIO,EAAiBnE,sBAAW,uCAAC,+BAAAC,EAAA,6DAASO,EAAT,EAASA,SAAUC,EAAnB,EAAmBA,SAAnB,SACXnB,EAAS,CAACkB,WAAUC,aADT,eAK/B+C,EAAS,IAAK,CAACM,SAAS,IALO,2CAAD,sDAO/B,CAACN,EAAUlE,IAEd,OACE,cAAC,IAAD,2BAAkBoE,GAAlB,aACE,qBAAK/B,UAAU,2CAAf,SACE,uBAAMA,UAAU,2BAA2BoC,SAAUH,EAAaO,GAAlE,UAEItF,EACE,mBAAG8C,UAAU,eAAb,SACG9C,IAED,KAEN,cAAC,EAAD,CACE8D,MAAM,WACNC,KAAK,OACLC,aAAa,GACbO,UAAQ,iBACRD,YAAY,iBACZa,aAAa,MACblB,WAAYO,EAAgB7C,WAE9B,cAAC,EAAD,CACEmC,MAAM,WACNC,KAAK,WACLC,aAAa,GACbO,UAAQ,iBACRD,YAAY,aACZa,aAAa,MACblB,WAAYO,EAAgB5C,WAE9B,sBAAKkB,UAAU,4BAAf,UACA,cAAC,IAAD,CAAMC,GAAG,SAASD,UAAU,kCAA5B,iCACE,wBACEyB,UAAQ,aACRR,KAAK,SACLqB,SAAUrF,EACV+C,UAAU,kEAJZ,mCC5DG,SAASyC,IAAgB,IAC5BhD,EAASS,EAAS,sBAAlBT,KACR,OAAQ,qCACJ,cAACc,EAAD,IACA,qBAAKP,UAAU,2DAAf,SACKP,EAAKmB,KAAI,SAAAC,GAAC,OAAI,wBAACnB,EAAD,2BAAamB,GAAb,IAAgBC,IAAKD,EAAEjB,cCLlD,IAAM8C,EAAa,SAAC/C,GAAW,IACpBE,EAAsBF,EAAtBE,KAAM8C,EAAgBhD,EAAhBgD,KAAMC,EAAUjD,EAAViD,OACnB,OAAO,8BAAIA,EAAJ,IAAaD,EAAb,IAAoB9C,MAGhB,SAASgD,IACpB,IAAMC,EAASC,cACPtD,EAASS,EAAS,gBAAD,OAAiB4C,EAAOlD,KAAzCH,KACR,IAAKA,GAAwB,IAAhBA,EAAKuD,OAAe,OAAQ,cAACzC,EAAD,IACzCzF,QAAQC,IAAI0E,GAJiB,IAKtBI,EAA8DJ,EAA9DI,KAAMoD,EAAwDxD,EAAxDwD,YAAaC,EAA2CzD,EAA3CyD,YAAapD,EAA8BL,EAA9BK,OAAQC,EAAsBN,EAAtBM,SAAUlB,EAAYY,EAAZZ,SACzD,OAAO,qCACH,cAAC0B,EAAD,IACA,qBAAKP,UAAU,QAAf,SACI,sBAAKA,UAAU,0CAAf,UACI,sBAAKA,UAAU,yBAAf,UACI,oBAAIA,UAAU,gCAAd,SAA+CH,IAC/C,oBAAGG,UAAU,8BAAb,kBAAkDnB,KAClD,sBAAKmB,UAAU,YAAf,UACI,4CAAeD,EAAf,SACA,2CAAcD,WAGtB,sBAAKE,UAAU,OAAf,UACI,qBAAKA,UAAU,yBAAf,SAAyCiD,EAAYrC,KAAI,SAACC,EAAGsC,GAAJ,OAAU,wBAAC,EAAD,2BAAgBtC,GAAhB,IAAmBC,IAAKqC,UAC3F,mBAAGnD,UAAU,uCAAb,SAAqDkD,eC3BzE,IAuBeE,EAvBE,SAAC,GAAwD,IAAtDpC,EAAqD,EAArDA,MAAOC,EAA8C,EAA9CA,KAAMC,EAAwC,EAAxCA,aAAcC,EAA0B,EAA1BA,WAAeC,EAAW,8DAC3BC,cAApC1D,EAD+D,EAC/DA,SAAuB2D,EADwC,EACrDC,UAAaD,OAC/B,OACE,sBAAKtB,UAAU,+BAAf,UACE,oDACMrC,EAASqD,EAAOG,IADtB,IAEEnB,UAAU,WACVkB,aAAcA,EACdM,YAAaR,EACbC,KAAMA,EACNrB,GAAIoB,EACJnB,KAAMmB,GACFI,IAELE,EAAON,IACN,mBAAGS,UAAQ,mBAAmBzB,UAAU,eAAxC,SACGsB,EAAON,GAAO/B,cCVnByC,EAAkB,CACtB7C,SAAU,CACR8C,UAAU,GAEZ7C,SAAU,CACR6C,UAAU,IAIC,SAAS0B,IACtB,IAAMxB,EAAWC,cACXC,EAAUC,cAEdC,EACEF,EADFE,aAGIqB,EAAkBjF,sBAAW,uCAAC,2CAAAC,EAAA,6DAASuB,EAAT,EAASA,KAAMC,EAAf,EAAeA,OAAQC,EAAvB,EAAuBA,SAAUmD,EAAjC,EAAiCA,YAAjC,IAA8CD,mBAA9C,MAA0D,KAA1D,WACQjI,IAAMwE,KAAN,UAAc9E,IAAd,YAAmC,CAACmF,OAAMC,SAAQC,WAAUmD,cAAaD,gBADjF,iBACZM,EADY,EAC3B9D,KAAQA,QAIb3E,QAAQC,IAAIwI,GACZ1B,EAAS,WAAD,OAAY0B,EAAU3D,IAAM,CAACuC,SAAS,KANd,2CAAD,sDAQhC,CAACN,IACJ,OAAQ,qCACN,cAACtB,EAAD,IACA,cAAC,IAAD,2BAAkBwB,GAAlB,aACE,qBAAK/B,UAAU,2CAAf,SACE,uBAAMA,UAAU,2BAA2BoC,SAAUH,EAAaqB,GAAlE,UACE,cAAC,EAAD,CACEtD,UAAU,WACVgB,MAAM,OACNC,KAAK,OACLC,aAAa,GACbO,UAAQ,iBACRD,YAAY,QACZa,aAAa,MACblB,WAAYO,EAAgB7C,WAChC,cAAC,EAAD,CACQmB,UAAU,WACVgB,MAAM,SACNC,KAAK,SACLC,aAAa,GACbO,UAAQ,iBACRD,YAAY,WACZa,aAAa,MACbmB,IAAI,IACJC,IAAI,OACR,cAAC,EAAD,CACIzD,UAAU,WACVgB,MAAM,WACNC,KAAK,SACLC,aAAa,GACbO,UAAQ,iBACRD,YAAY,YACZa,aAAa,MACbmB,IAAI,IACJC,IAAI,QACR,cAAC,EAAD,CACIzD,UAAU,4BACVwB,YAAY,kBACZR,MAAM,gBACZ,qBAAKhB,UAAU,4BAAf,SACE,wBACEyB,UAAQ,aACRR,KAAK,SACLjB,UAAU,kEAHZ,mCC/DG,SAAS0D,IACtB,OACE,cAAC,IAAD,UACE,cAAC9F,EAAA,EAAD,UACE,cAAC+F,EAAD,QAMR,SAASA,IAAU,IACTvG,EAAaN,cAAbM,SACR,OAAQ,cAAC,IAAD,UACLA,EAAW,qCACV,cAAC,IAAD,CAAOwG,KAAM,IAAKC,OAAK,EAACC,QAAS,cAACnD,EAAD,MACjC,cAAC,IAAD,CAAOiD,KAAM,SAAUC,OAAK,EAACC,QAAS,cAACrB,EAAD,MACtC,cAAC,IAAD,CAAOmB,KAAM,OAAQC,OAAK,EAACC,QAAS,cAACT,EAAD,MACpC,cAAC,IAAD,CAAOO,KAAM,cAAeC,OAAK,EAACC,QAAS,cAACjB,EAAD,SACvC,qCACN,cAAC,IAAD,CAAOe,KAAM,SAAUC,OAAK,EAACC,QAAS,cAAClC,EAAD,MACtC,cAAC,IAAD,CAAOgC,KAAM,YAAaC,OAAK,EAACC,QAAS,cAACvB,EAAD,MACzC,cAAC,IAAD,CAAOqB,KAAM,IAAKE,QAAS,cAAC,IAAD,CAAU7D,GAAG,kBC9B5C,IAYe8D,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAChB,EAAD,MAEFiB,SAASC,eAAe,SAG1BC,OAAOC,iBAAiB,QAAQ,WAC1B,kBAAmBC,WACrBA,UAAUC,cAAcrH,SAAS,uBAOrCoG,M","file":"static/js/main.706a9b98.chunk.js","sourcesContent":["import axiosRoot from 'axios';\nimport config from '../config.json';\n\nexport const apiPrefix = JSON.parse(process.env.REACT_APP_API_PREFIX || '\"http://localhost:9000\"');\nconsole.log(apiPrefix);\n\nexport const axios = axiosRoot.create({\n\tbaseURL: apiPrefix+'/',\n    headers: {\n        Authorization: `Bearer ${localStorage.getItem(config.token_key)}`,\n    }\n});\n\nexport const setAuthToken = (token) => {\n\tif (token) {\n\t\taxios.defaults.headers['Authorization'] = `Bearer ${token}`;\n\t} else {\n\tdelete axios.defaults.headers['Authorization'];\n\t}\n}","import { createContext, useMemo, useState, useCallback, useEffect, useContext } from 'react';\nimport * as userApi from '../api/user';\nimport config from '../config.json';\nimport * as api from '../api';\n\nconst JWT_TOKEN_KEY = config.token_key;\nconst AuthContext = createContext();\n\nfunction parseJwt(token) {\n  if (!token) return {};\n  const base64Url = token.split('.')[1];\n  const payload = Buffer.from(base64Url, 'base64');\n  const jsonPayload = payload.toString('ascii');\n  return JSON.parse(jsonPayload);\n}\n\nfunction parseExp(exp) {\n  if (!exp) return null;\n  if (typeof exp !== 'number') exp = Number(exp);\n  if (isNaN(exp)) return null;\n  return new Date(exp * 1000);\n}\n\nconst useAuth = () => useContext(AuthContext);\n\nexport const useSession = () => {\n  const { token, user, ready, loading, error, hasRole } = useAuth();\n  return {\n    token,\n    user,\n    ready,\n    error,\n    loading,\n    isAuthed: Boolean(token),\n    hasRole,\n  };\n};\n\nexport const useLogin = () => {\n  const { login } = useAuth();\n  return login;\n};\n\nexport const useLogout = () => {\n  const { logout } = useAuth();\n  return logout;\n};\n\nexport const useRegister = () => {\n  const { register } = useAuth();\n  return register;\n};\n\nexport const AuthProvider = ({\n  children,\n}) => {\n  // will be false until the token is set\n  const [ready, setReady] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [token, setToken] = useState(localStorage.getItem(JWT_TOKEN_KEY));\n  const [user, setUser] = useState(null);\n\n  const setSession = useCallback(async (token, user) => {\n    const { exp } = parseJwt(token);\n    const expiry = parseExp(exp);\n    const stillValid = expiry >= new Date();\n\n    if (stillValid) {\n      localStorage.setItem(JWT_TOKEN_KEY, token);\n    } else {\n      localStorage.removeItem(JWT_TOKEN_KEY);\n      token = null;\n    }\n\n    api.setAuthToken(token);\n    setToken(token);\n    setReady(token && stillValid);\n\n    if (!user && stillValid) {\n      //user = await userApi.getUserById(userId);\n    }\n    setUser(user);\n  }, []);\n\n  useEffect(() => {\n    setSession(token);\n  }, [token, setSession]);\n\n  const login = useCallback(async (username, password) => {\n    try {\n      setLoading(true);\n      setError(null);\n      const { token, user } = await userApi.login(username, password);\n      await setSession(token, user);\n      return true;\n    } catch (error) {\n      console.error(error);\n      setError('Gebruikersnaam en wachtwoord komen niet overeen.');\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, [setSession]);\n\n  const register = useCallback(async ({username, password}) => {\n    try {\n      setLoading(true);\n      setError(null);\n      const { token, user } = await userApi.register(username, password);\n      console.warn(token, user)\n      await setSession(token, user);\n      return true;\n    } catch (error) {\n      setError(error.message);\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  }, [setSession]);\n\n  const logout = useCallback(() => {\n    setSession(null, null);\n  }, [setSession]);\n\n  const hasRole = useCallback((role) => {\n    if (!user) return false;\n    return user.roles.includes(role);\n  }, [user]);\n\n  const value = useMemo(() => ({\n    token,\n    user,\n    ready,\n    loading,\n    error,\n    login,\n    logout,\n    register,\n    hasRole,\n  }), [token, user, ready, loading, error, login, logout, register, hasRole]);\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};","import { apiPrefix, axios } from \".\";\n\nexport const login = async (username, password) => {\n\tconst {\n\t\tdata: {data}\n\t} = await axios.post(`${apiPrefix}/login`, {\n\t\tusername,\n\t\tpassword\n\t});\n\treturn data;\n};\n\nexport const register = async (username, password) => {\n\tconst {\n\t\tdata: {data}\n\t} = await axios.post(`${apiPrefix}/users`, {\n\t\tusername,\n\t\tpassword\n\t});\n\treturn data;\n};","import { Link } from 'react-router-dom';\n\n\nexport default function Summary(props) {\n    const {id, name, people, duration} = props;\n    return(<Link className='bg-gray-800 m-5 px-6 py-3 text-gray-200 cursor-pointer' to={`/recipe/${id}`} >\n        <div className='flex pb-3 items-center'>\n            <h1 className='text-center flex-grow text-lg'>{name}</h1>\n            <div className='flex-none'>\n                <p>Tijdsduur: {duration}min</p>\n                <p>Personen: {people}</p>\n            </div>\n        </div>\n    </Link>);\n}","import { apiPrefix, axios } from '../api';\nimport {useState, useEffect, useCallback} from 'react';\n\nexport function useFetch(uri) {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState();\n\n  const fetchData = useCallback(async (uri) => {\n    try {\n      setError();\n      setLoading(true);\n      const {data} = await axios.get(apiPrefix+uri);\n      setData(data.data);\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      setError(error);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchData(uri);\n  }, [uri, fetchData]);\n\n  return {loading, data, error};\n}","import { useLogout } from \"../contexts/AuthProvider\";\nimport { Link } from 'react-router-dom';\n\n\nexport default function Navbar() {\n    const logout = useLogout()\n\n    return (<div className=\"bg-gray-800 p-4 fixed w-full flex items-center text-white\">\n        <Link className=\"flex items-center\" to='/' ><img src=\"/recipe.png\" alt=\"\" className=\"w-12 mx-4\" />Recepten App</Link>\n        <div className=\"flex ml-auto\">\n            <Link className=\"ml-auto mr-6 cursor-pointer\" to='/' >Eigen Recepten</Link>\n            <Link className=\"ml-auto mr-6 cursor-pointer\" to='/other' >Andere Recepten</Link>\n            <Link className=\"ml-auto mr-6 cursor-pointer\" to='/add' >Recept Toevoegen</Link>\n        </div>\n        <div className=\"ml-auto mr-4 cursor-pointer\" onClick={logout} >Uitloggen</div>\n    </div>);\n}","import Summary from '../components/Summary';\nimport { useFetch } from '../hooks/useFetch';\nimport Navbar from '../components/Navbar';\n\nexport default function Home() {\n    const { data } = useFetch('/api/recipes/own');\n    return (<>\n        <Navbar />\n        <div className='App grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 pt-28' >\n            {data.map(v => <Summary {...v} key={v.id} />)}\n        </div>\n    </>);\n}","import { useFormContext } from 'react-hook-form';\n\nconst LabelInput = ({ label, type, defaultValue, validation, ...rest }) => {\n  const { register, formState: { errors } } = useFormContext();\n  return (\n    <div className=\"col-span-6 sm:col-span-3 p-2\">\n      <input\n        {...register(label, validation)}\n        className=\"p-2 w-72\"\n        defaultValue={defaultValue}\n        placeholder={label}\n        type={type}\n        id={label}\n        name={label}\n        {...rest}\n      />\n      {errors[label] && (\n        <p data-cy=\"labelinput-error\" className=\"text-red-500\">\n          {errors[label].message}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default LabelInput;","import { useCallback } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\nimport LabelInput from '../components/LabelInput';\nimport { useLogin, useSession } from '../contexts/AuthProvider';\nimport { useNavigate, Link } from 'react-router-dom';\n\nconst validationRules = {\n  username: {\n    required: true\n  },\n  password: {\n    required: true\n  }\n};\n\nexport default function Login() {\n  const navigate = useNavigate();\n  const { loading, error } = useSession();\n  const login = useLogin();\n  const methods = useForm();\n  const {\n    handleSubmit,\n  } = methods;\n\n  const handleLogin = useCallback(async ({ username, password }) => {\n    const success = await login(username, password);\n\n    if (success) {\n      // we can't come back to login\n      navigate('/', {replace: true});\n    }\n  }, [navigate, login]);\n\n  return (\n    <FormProvider {...methods}>\n      <div className=\"mx-auto w-1/4 h-screen flex items-center\">\n        <form className=\"grid grid-cols-1 gap-y-4\" onSubmit={handleSubmit(handleLogin)}>\n          {\n            error ? (\n              <p className=\"text-red-500\">\n                {error}\n              </p>\n            ) : null\n          }\n          <LabelInput\n            label=\"username\"\n            type=\"text\"\n            defaultValue=\"\"\n            data-cy=\"username_input\"\n            placeholder=\"Gebruikersnaam\"\n            autoComplete=\"off\"\n            validation={validationRules.username} />\n\n          <LabelInput\n            label=\"password\"\n            type=\"password\"\n            defaultValue=\"\"\n            data-cy=\"password_input\"\n            placeholder=\"Wachtwoord\"\n            autoComplete=\"off\"\n            validation={validationRules.password} />\n\n          <div className=\"flex flex-row justify-end\">\n          <Link to=\"/register\" className='px-4 py-2 text-gray-400' >Registreer</Link>\n            <button\n              data-cy=\"submit_btn\"\n              type=\"submit\"\n              disabled={loading}\n              className=\"disabled:opacity-50 text-white bg-gray-800 px-4 py-2 rounded-sm\">\n              Login\n            </button>\n          </div>\n        </form>\n      </div>\n    </FormProvider>\n  );\n}","import { useCallback } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\nimport LabelInput from '../components/LabelInput';\nimport { useRegister, useSession } from '../contexts/AuthProvider';\nimport { useNavigate, Link } from 'react-router-dom';\n\nconst validationRules = {\n  username: {\n    required: true\n  },\n  password: {\n    required: true\n  }\n};\n\nexport default function Register() {\n  const navigate = useNavigate();\n  const { loading, error } = useSession();\n  const register = useRegister();\n  const methods = useForm();\n  const {\n    handleSubmit,\n  } = methods;\n\n  const handleRegister = useCallback(async ({ username, password }) => {\n    const success = await register({username, password});\n\n    if (success) {\n      // we can't come back to login\n      navigate('/', {replace: true});\n    }\n  }, [navigate, register]);\n\n  return (\n    <FormProvider {...methods}>\n      <div className=\"mx-auto w-1/4 h-screen flex items-center\">\n        <form className=\"grid grid-cols-1 gap-y-4\" onSubmit={handleSubmit(handleRegister)}>\n          {\n            error ? (\n              <p className=\"text-red-500\">\n                {error}\n              </p>\n            ) : null\n          }\n          <LabelInput\n            label=\"username\"\n            type=\"text\"\n            defaultValue=\"\"\n            data-cy=\"username_input\"\n            placeholder=\"Gebruikersnaam\"\n            autoComplete=\"off\"\n            validation={validationRules.username} />\n\n          <LabelInput\n            label=\"password\"\n            type=\"password\"\n            defaultValue=\"\"\n            data-cy=\"password_input\"\n            placeholder=\"Wachtwoord\"\n            autoComplete=\"off\"\n            validation={validationRules.password} />\n\n          <div className=\"flex flex-row justify-end\">\n          <Link to=\"/login\" className='px-4 py-2 text-gray-400 text-sm' >Terug naar inloggen</Link>\n            <button\n              data-cy=\"submit_btn\"\n              type=\"submit\"\n              disabled={loading}\n              className=\"disabled:opacity-50 text-white bg-gray-800 px-4 py-2 rounded-sm\">\n              Registreer\n            </button>\n          </div>\n        </form>\n      </div>\n    </FormProvider>\n  );\n}","import Summary from '../components/Summary';\nimport { useFetch } from '../hooks/useFetch';\nimport Navbar from '../components/Navbar';\n\nexport default function OtherRecipes() {\n    const { data } = useFetch('/api/recipes/other');\n    return (<>\n        <Navbar />\n        <div className='App grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 pt-28' >\n            {data.map(v => <Summary {...v} key={v.id} />)}\n        </div>\n    </>);\n}","import { useFetch } from '../hooks/useFetch';\nimport { useParams } from 'react-router';\nimport Navbar from '../components/Navbar';\n\nconst Ingredient = (props) => {\n    const {name, unit, amount} = props;\n    return(<p>{amount} {unit} {name}</p>);\n}\n\nexport default function Recipe() {\n    const params = useParams();\n    const { data } = useFetch(`/api/recipes/${params.id}`);\n    if (!data || data.length === 0) {return (<Navbar />);}\n    console.log(data);\n    const {name, ingredients, preparation, people, duration, username} = data;\n    return(<>\n        <Navbar />\n        <div className='pt-24' >\n            <div className='bg-gray-800 m-5 px-6 py-3 text-gray-200' >\n                <div className='flex pb-3 items-center'>\n                    <h1 className='text-center flex-grow text-lg'>{name}</h1>\n                    <p className='mr-10 text-sm text-gray-400' >door {username}</p>\n                    <div className='flex-none'>\n                        <p>Tijdsduur: {duration}min</p>\n                        <p>Personen: {people}</p>\n                    </div>\n                </div>\n                <div className='flex'>\n                    <div className='pr-8 text-sm min-w-max'>{ingredients.map((v, i) => <Ingredient {...v} key={i} />)}</div>\n                    <p className='text-justify text-xs overflow-hidden'>{preparation}</p>\n                </div>\n            </div>\n        </div>\n    </>);\n}","import { useFormContext } from 'react-hook-form';\n\nconst Textarea = ({ label, type, defaultValue, validation, ...rest }) => {\n  const { register, formState: { errors } } = useFormContext();\n  return (\n    <div className=\"col-span-6 sm:col-span-3 p-2\">\n      <textarea\n        {...register(label, validation)}\n        className=\"p-2 w-72\"\n        defaultValue={defaultValue}\n        placeholder={label}\n        type={type}\n        id={label}\n        name={label}\n        {...rest}\n      />\n      {errors[label] && (\n        <p data-cy=\"labelinput-error\" className=\"text-red-500\">\n          {errors[label].message}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default Textarea;","import { useCallback } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\nimport LabelInput from '../components/LabelInput';\nimport Textarea from '../components/TextArea';\nimport { useNavigate } from 'react-router-dom';\nimport Navbar from '../components/Navbar';\nimport { apiPrefix, axios } from \"../api\";\n\nconst validationRules = {\n  username: {\n    required: true\n  },\n  password: {\n    required: true\n  }\n};\n\nexport default function AddRecipe() {\n  const navigate = useNavigate();\n  const methods = useForm();\n  const {\n    handleSubmit,\n  } = methods;\n\n  const handleAddRecipe = useCallback(async ({ name, people, duration, preparation, ingredients='[]' }) => {\n    const {data : {data : newRecipe}} = await axios.post(`${apiPrefix}/recipes`, {name, people, duration, preparation, ingredients});\n\n    if (newRecipe) {\n      // we can't come back to login\n      console.log(newRecipe);\n      navigate(`/recipe/${newRecipe.id}`, {replace: true});\n    }\n  }, [navigate]);\n  return (<>\n    <Navbar />\n    <FormProvider {...methods}>\n      <div className=\"mx-auto w-1/4 h-screen flex items-center\">\n        <form className=\"grid grid-cols-1 gap-y-4\" onSubmit={handleSubmit(handleAddRecipe)}>\n          <LabelInput\n            className=\"w-96 p-2\"\n            label=\"name\"\n            type=\"text\"\n            defaultValue=\"\"\n            data-cy=\"username_input\"\n            placeholder=\"Titel\"\n            autoComplete=\"off\"\n            validation={validationRules.username} />\n        <LabelInput\n                className=\"w-96 p-2\"\n                label=\"people\"\n                type=\"number\"\n                defaultValue=\"\"\n                data-cy=\"username_input\"\n                placeholder=\"Personen\"\n                autoComplete=\"off\"\n                min='1'\n                max='99' />\n            <LabelInput\n                className=\"w-96 p-2\"\n                label=\"duration\"\n                type=\"number\"\n                defaultValue=\"\"\n                data-cy=\"username_input\"\n                placeholder=\"Tijdsduur\"\n                autoComplete=\"off\"\n                min='1'\n                max='999' />\n            <Textarea\n                className='p-2 w-96 h-32 resize-none'\n                placeholder='Bereidingswijze'\n                label='preparation' />\n          <div className=\"flex flex-row justify-end\">\n            <button\n              data-cy=\"submit_btn\"\n              type=\"submit\"\n              className=\"disabled:opacity-50 text-white bg-gray-800 px-4 py-2 rounded-sm\">\n              Voeg toe\n            </button>\n          </div>\n        </form>\n      </div>\n    </FormProvider>\n  </>\n    \n  );\n}","import { AuthProvider, useSession } from './contexts/AuthProvider';\nimport { BrowserRouter, Route, Routes, Navigate } from 'react-router-dom';\nimport Home from './pages/Home';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport OtherRecipes from './pages/OtherRecipes';\nimport Recipe from './pages/Recipe';\nimport AddRecipe from './pages/AddRecipe';\n\nexport default function App() {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <Router />\n      </AuthProvider>\n    </BrowserRouter>\n  );\n}\n\nfunction Router() {\n  const { isAuthed } = useSession();\n  return (<Routes>\n    {isAuthed ? <>\n      <Route path={'/'} exact element={<Home />} />\n      <Route path={'/other'} exact element={<OtherRecipes />} />\n      <Route path={'/add'} exact element={<AddRecipe />} />\n      <Route path={'/recipe/:id'} exact element={<Recipe />} />\n    </> : <>\n    <Route path={'/login'} exact element={<Login />} />\n    <Route path={'/register'} exact element={<Register />} />\n    <Route path={'*'} element={<Navigate to='/login' />} />\n    </>}\n</Routes>);\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nwindow.addEventListener(\"load\", () => {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.register(\"serviceWorker.js\");\n  }\n});\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}